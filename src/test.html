<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button id="btn">Добавить</button>
<script>
    let btn = document.body.querySelector('#btn');
    function createDiv() {
        let div = document.createElement('DIV');

        div.className = 'draggable-div';
        div.style.backgroundColor = '#'+((1<<24)*Math.random()|0).toString(16);
        div.style.position = 'absolute';
        div.style.width = Math.random()*100 + 'px';
        div.style.height = Math.random()*100 + 'px';
        div.style.left = Math.random()*1000 + 'px';
        div.style.top = Math.random()*100 + 'px';

        return div;
    }

    /*
     Функция должна добавлять обработчики событий для перетаскивания элемента при помощи drag and drop

     Пример:
       const newDiv = createDiv();
       homeworkContainer.appendChild(newDiv);
       addListeners(newDiv);
     */
    function addListeners(target) {

        target.onmousedown = function(e) {

            let coords = getCoords(target);
            let shiftX = e.pageX - coords.left;
            let shiftY = e.pageY - coords.top;
            moveAt(e);

            target.style.zIndex = '1000';

            function moveAt(e) {

                target.style.left = e.pageX - shiftX + 'px';
                target.style.top = e.pageY - shiftY + 'px';
            }

            document.onmousemove = function(e) {
                moveAt(e);
            };

            target.onmouseup = function() {
                document.onmousemove = null;
                target.onmouseup = null;
            };
        };
        target.ondragstart = function() {
            return false;
        };

        function getCoords(elem) {
            let box = elem.getBoundingClientRect();
            return {
                top: box.top + pageYOffset,
                left: box.left + pageXOffset
            };
        }
    }


    btn.addEventListener('click', function () {
        // создать новый div
        const div = createDiv();

        // добавить на страницу
        document.body.appendChild(div);
        // назначить обработчики событий мыши для реализации D&D
        addListeners(div);
        // можно не назначать обработчики событий каждому div в отдельности, а использовать делегирование
        // или использовать HTML5 D&D - https://www.html5rocks.com/ru/tutorials/dnd/basics/
    });
</script>
</body>
</html>